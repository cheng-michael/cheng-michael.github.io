<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>michael cheng</title>
    <style>
        :root {
            /* LIGHT MODE */
            --bg: #ffffff;
            --headings: #000000;
            --text: #555555;
            --effect: rgba(0, 0, 0, 0.15); /* Color of the ripples */
        }

        body.dark-mode {
            /* DARK MODE */
            --bg: #111111;
            --headings: #ffffff;
            --text: #a0a0a0;
            --effect: rgba(255, 255, 255, 0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
            font-size: 14px;
            line-height: 1.6;
            text-transform: lowercase;
            
            /* Center Layout */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            
            transition: background-color 0.3s, color 0.3s;
            overflow: hidden; /* Prevents scrollbars when effects hit edges */
        }

        /* The Background Canvas for Effects */
        #canvas-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind text */
            pointer-events: none; /* Ignore clicks */
        }

        main {
            max-width: 520px;
            width: 100%;
            text-align: left;
            position: relative;
            z-index: 1; /* Above canvas */
        }

        h1 {
            color: var(--headings);
            font-size: 14px;
            font-weight: normal;
            margin-bottom: 2rem;
        }

        p {
            margin-bottom: 2rem;
        }

        ul {
            list-style: none;
            margin-bottom: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        a {
            color: inherit;
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--headings);
            text-decoration-style: double;
        }

        /* CONTROLS (Bottom Corners) */
        .control-btn {
            position: fixed;
            bottom: 2rem;
            background: none;
            border: none;
            color: var(--text);
            font-family: inherit;
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
            padding: 0.5rem;
            opacity: 0.7;
            z-index: 10;
            user-select: none;
        }

        .control-btn:hover, .control-btn:active {
            color: var(--headings);
            opacity: 1;
        }

        /* Right: Dark Mode */
        #theme-toggle { right: 2rem; }

        /* Left: Flux Effect */
        #flux-btn { left: 2rem; }
    </style>
</head>
<body>

    <canvas id="canvas-bg"></canvas>

    <main>
        <h1>michael cheng</h1>

        <p>
            lorem ipsum dolor sit amet, consectetur adipiscing elit. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        </p>

        <ul>
            <li>
                <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#64;&#109;&#105;&#99;&#104;&#97;&#101;&#108;&#99;&#104;&#101;&#110;&#103;&#46;&#100;&#101;&#118;">email</a>
            </li>
            <li>
                <a href="https://github.com/michaelchengdev">github</a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/michaelchengdev/">linkedin</a>
            </li>
        </ul>

        <p>
            viverra ipsum nunc aliquet bibendum enim facilisis gravida neque convallis.
        </p>
    </main>

    <button id="flux-btn" class="control-btn">flux</button>
    
    <button id="theme-toggle" class="control-btn">dark</button>

    <script>
        // --- THEME LOGIC ---
        const toggleButton = document.getElementById('theme-toggle');
        const body = document.body;

        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            body.classList.add('dark-mode');
            toggleButton.textContent = 'light';
        }

        toggleButton.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            toggleButton.textContent = body.classList.contains('dark-mode') ? 'light' : 'dark';
        });

        // --- EFFECT LOGIC (CANVAS) ---
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        const fluxBtn = document.getElementById('flux-btn');
        
        let width, height;
        let isHolding = false;
        let ripples = [];
        let asciiDrops = [];
        const chars = "01.:+x-="; // The ASCII palette

        // Handle Retina Displays
        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width * window.devicePixelRatio;
            canvas.height = height * window.devicePixelRatio;
            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        }
        window.addEventListener('resize', resize);
        resize();

        // Interaction Listeners
        const startEffect = (e) => { 
            // prevent default to stop text selection on mobile
            if(e.type === 'touchstart') e.preventDefault(); 
            isHolding = true; 
        };
        const stopEffect = () => { isHolding = false; };

        fluxBtn.addEventListener('mousedown', startEffect);
        fluxBtn.addEventListener('touchstart', startEffect);
        
        window.addEventListener('mouseup', stopEffect);
        window.addEventListener('touchend', stopEffect);

        // Get current color from CSS variable
        function getEffectColor() {
            const style = getComputedStyle(document.body);
            return style.getPropertyValue('--headings').trim();
        }

        // --- ANIMATION CLASSES ---

        class Ripple {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.radius = 0;
                this.maxRadius = Math.random() * 100 + 50;
                this.speed = Math.random() * 2 + 1;
                this.opacity = 1;
            }

            update() {
                this.radius += this.speed;
                this.opacity -= 0.015; // Fade out speed
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.strokeStyle = getEffectColor();
                ctx.globalAlpha = this.opacity * 0.2; // Keep it subtle
                ctx.stroke();
                ctx.globalAlpha = 1;
            }
        }

        class AsciiDrop {
            constructor(side) {
                // side: 'left' or 'right'
                this.x = side === 'left' 
                    ? Math.random() * 50 // 0-50px from left
                    : width - (Math.random() * 50); // 0-50px from right
                this.y = -20;
                this.char = chars[Math.floor(Math.random() * chars.length)];
                this.speed = Math.random() * 3 + 2;
                this.fontSize = Math.random() * 14 + 10;
                this.opacity = 1;
            }

            update() {
                this.y += this.speed;
                if (this.y > height) this.opacity = 0;
            }

            draw() {
                ctx.font = `${this.fontSize}px monospace`;
                ctx.fillStyle = getEffectColor();
                ctx.globalAlpha = this.opacity * 0.4;
                ctx.fillText(this.char, this.x, this.y);
                ctx.globalAlpha = 1;
            }
        }

        // --- MAIN LOOP ---
        function animate() {
            ctx.clearRect(0, 0, width, height);

            // 1. Spawn new particles if holding
            if (isHolding) {
                // Spawn Ripples
                if (Math.random() < 0.2) { // 20% chance per frame
                    ripples.push(new Ripple());
                }
                // Spawn ASCII (Left and Right)
                if (Math.random() < 0.5) {
                    asciiDrops.push(new AsciiDrop('left'));
                    asciiDrops.push(new AsciiDrop('right'));
                }
            }

            // 2. Update & Draw Ripples
            for (let i = ripples.length - 1; i >= 0; i--) {
                const r = ripples[i];
                r.update();
                r.draw();
                if (r.opacity <= 0) ripples.splice(i, 1);
            }

            // 3. Update & Draw ASCII
            for (let i = asciiDrops.length - 1; i >= 0; i--) {
                const a = asciiDrops[i];
                a.update();
                a.draw();
                if (a.opacity <= 0 || a.y > height) asciiDrops.splice(i, 1);
            }

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>

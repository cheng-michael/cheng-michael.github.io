<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>michael cheng</title>
    <style>
        :root {
            /* LIGHT MODE */
            --bg: #ffffff;
            --headings: #000000;
            --text: #555555;
        }

        body.dark-mode {
            /* DARK MODE */
            --bg: #111111;
            --headings: #ffffff;
            --text: #a0a0a0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
            font-size: 14px;
            line-height: 1.6;
            text-transform: lowercase;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            overflow-x: hidden; /* Prevent scrollbars during wave */
            
            transition: background-color 0.3s, color 0.3s;
        }

        main {
            max-width: 520px;
            width: 100%;
            text-align: left;
            position: relative;
            z-index: 1;
        }

        /* Essential for the wave effect: makes spans display inline but transformable */
        .char {
            display: inline-block;
            position: relative;
            white-space: pre; /* Preserves spaces */
        }

        h1 {
            color: var(--headings);
            font-size: 14px;
            font-weight: normal;
            margin-bottom: 2rem;
        }

        p {
            margin-bottom: 2rem;
        }

        ul {
            list-style: none;
            margin-bottom: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        a {
            color: inherit;
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s;
        }

        a:hover {
            color: var(--headings);
            text-decoration-style: double;
        }

        /* CONTROLS CONTAINER (Bottom Right) */
        .controls {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 1.5rem; /* Space between buttons */
            z-index: 10;
        }

        .btn {
            background: none;
            border: none;
            color: var(--text);
            font-family: inherit;
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
            padding: 0.5rem;
            opacity: 0.7;
            user-select: none; /* Prevents text selection while holding */
        }

        .btn:hover, .btn:active {
            color: var(--headings);
            opacity: 1;
        }
        
        /* Active state for ripple button to show it's working */
        .btn:active {
            text-decoration-style: double;
        }
    </style>
</head>
<body>

    <main id="content">
        <h1>michael cheng</h1>

        <p>
            lorem ipsum dolor sit amet, consectetur adipiscing elit. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        </p>

        <ul>
            <li>
                <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#64;&#109;&#105;&#99;&#104;&#97;&#101;&#108;&#99;&#104;&#101;&#110;&#103;&#46;&#100;&#101;&#118;">email</a>
            </li>
            <li>
                <a href="https://github.com/michaelchengdev">github</a>
            </li>
            <li>
                <a href="https://www.linkedin.com/in/michaelchengdev/">linkedin</a>
            </li>
        </ul>

        <p>
            viverra ipsum nunc aliquet bibendum enim facilisis gravida neque convallis.
        </p>
    </main>

    <div class="controls">
        <button id="ripple-btn" class="btn">ripple</button>
        <button id="theme-toggle" class="btn">dark</button>
    </div>

    <script>
        // --- 1. THEME TOGGLE LOGIC ---
        const toggleButton = document.getElementById('theme-toggle');
        const body = document.body;

        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            body.classList.add('dark-mode');
            toggleButton.textContent = 'light';
        }

        toggleButton.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            toggleButton.textContent = body.classList.contains('dark-mode') ? 'light' : 'dark';
        });

        // --- 2. RIPPLE EFFECT LOGIC ---
        const content = document.getElementById('content');
        const rippleBtn = document.getElementById('ripple-btn');
        let isRippling = false;
        let time = 0;
        let animationFrame;

        // Step A: Split all text into individual <span> characters
        function splitTextToSpans(element) {
            if (element.nodeType === 3) { // Text node
                const text = element.nodeValue;
                const parent = element.parentNode;
                const chars = text.split('').map(char => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    span.className = 'char';
                    return span;
                });
                // Replace text node with spans
                chars.forEach(span => parent.insertBefore(span, element));
                parent.removeChild(element);
            } else if (element.nodeType === 1) { // Element node
                // Recursively split children (converting collection to array to avoid live list issues)
                Array.from(element.childNodes).forEach(splitTextToSpans);
            }
        }

        // Run the split once on load
        splitTextToSpans(content);
        
        // Cache all characters for performance
        const allChars = document.querySelectorAll('.char');

        // Step B: The Physics Loop
        function animateRipple() {
            if (!isRippling) {
                // Reset positions smoothly when stopped
                allChars.forEach(char => {
                    char.style.transform = `translateY(0px)`;
                });
                return; 
            }

            time += 0.1; // Speed of the wave
            
            // We'll ripple from the center of the screen
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;

            allChars.forEach(char => {
                const rect = char.getBoundingClientRect();
                const charX = rect.left + (rect.width / 2);
                const charY = rect.top + (rect.height / 2);

                // Calculate distance from center
                const dist = Math.sqrt(Math.pow(charX - centerX, 2) + Math.pow(charY - centerY, 2));

                // The Magic Formula: Sine wave based on distance and time
                // Dist/50 controls wavelength (width of ripples)
                // * 10 controls amplitude (height of ripples)
                const y = Math.sin((dist / 40) - time) * 10;

                char.style.transform = `translateY(${y}px)`;
            });

            requestAnimationFrame(animateRipple);
        }

        // Step C: Button Events (Hold to Ripple)
        const startRipple = () => {
            if (!isRippling) {
                isRippling = true;
                animateRipple();
            }
        };

        const stopRipple = () => {
            isRippling = false;
        };

        // Mouse Events
        rippleBtn.addEventListener('mousedown', startRipple);
        window.addEventListener('mouseup', stopRipple);
        
        // Touch Events (for mobile)
        rippleBtn.addEventListener('touchstart', (e) => { e.preventDefault(); startRipple(); });
        window.addEventListener('touchend', stopRipple);

    </script>
</body>
</html>
